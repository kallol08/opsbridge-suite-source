####################################
# Groups (must come first)
####################################
groups:

# General
- name: external-access
  label: common.group.externalAccess.label
  description: common.group.externalAccess.desc
  category: GENERAL

- name: docker-settings
  label: common.group.docker.label
  category: GENERAL

- name: general-settings
  label: common.group.general.label
  category: GENERAL

- name: byok
  label: common.group.byok.label
  category: GENERAL
# Services
- name: Textlabel
  label: opsb.group.text.label
  category: "SERVICES"
- name: stakeholder-dashboard
  label: opsb.group.capabilities.sd.label
  category: "SERVICES"

#- name: reporting
#  label: opsb.group.capabilities.reporting.label
#  category: "SERVICES"

- name: analytics
  label: opsb.group.capabilities.aec.label
  category: "SERVICES"

- name: obm
  label: opsb.group.capabilities.obm.label
  category: "SERVICES"

- name: hyperscale-observability
  label: opsb.group.capabilities.hyperscaleobservability.label
  category: "SERVICES"

- name: agentless-monitoring
  label: opsb.group.capabilities.agentlessmonitoring.label
  category: "SERVICES"

- name: application-monitoring
  label: opsb.group.capabilities.applicationmonitoring.label
  category: "SERVICES"

#- name: bvd-smtp-conf
#  label: opsb.group.smtp.label
#  category: "SERVICES"

- name: anomaly-detection
  label: opsb.group.capabilities.anomalydetection.label
  category: "SERVICES"



- name: optic
  label: common.capabilities.opticReporting.label
  category: SERVICES

- name: optic-reporting
  label: opticReporting.group.label
  category: SERVICES


- name: cloud-config
  label: common.group.cloud.label
  description: common.group.cloud.desc
  category: SERVICES
# Security
- name: system-security
  label: common.group.security.label
  category: SECURITY

- name: trust
  label: common.group.tlsCerts.label
  type:
    key: CA_CERTIFICATE
    trustedCAListParam: trusted-ca-list
  category: SECURITY

- name: client-certs
  label: common.group.cosoClientCerts.label
  type:
    key: CA_CERTIFICATE
    trustedCAListParam: api-client-ca-list
  category: SECURITY

- name: uid-gid
  label: common.group.uid-gid.label
  category: SECURITY

- name: server-certs
  label: common.servercert.group.label
  type:
    key: SERVER_CERTIFICATE
    formatTypeParam: format-type
    certificateChainParam: ca-cert
    serverCertParam: server-cert
    privateKeyParam: private-key
    privateKeyPasswordParam: private-key-password
    p12FileParam: pkcs12-cert
    p12FilePasswordParam: pkcs12-cert-password
  category: SECURITY
  groupToggle:
    helmKey: global.tls.enabled
    defaultValue: false

- name: server-certs-opticdl
  label: common.servercert.opticdl.group.label
  type:
    key: SERVER_CERTIFICATE
    formatTypeParam: format-type-opticdl
    certificateChainParam: ca-cert-opticdl
    serverCertParam: server-cert-opticdl
    privateKeyParam: private-key-opticdl
    privateKeyPasswordParam: private-key-password-opticdl
    p12FileParam: pkcs12-cert-opticdl
    p12FilePasswordParam: pkcs12-cert-password-opticdl
  category: SECURITY
  groupToggle:
    helmKey: itomdipulsar.proxy.config.useExternalCASignedCerts
    defaultValue: false

# Databases
# This is the overall database parameters, i.e. host:port, TLS, and dbType
# It is intentionally NOT a group of type "DATABASE", because it is just
# querying those few parameters for other groups which ARE "DATABASE" groups.
#
- name: database
  label: common.group.db.label
  category: DATABASES


- name: wallet-config
  label: common.group.relationaldb.walletconfig.label
  category: DATABASES


# This is the DATABASE group for the IDM database user/pass/dbName
- name: database-admin
  label: common.group.db.admin.label
  category: DATABASES
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    createDbParam: database.db-createdb
    adminDatabaseNameParam: dbadmin-dbname
    adminUserParam: dbadmin-user
    adminPassParam: dbadmin-pass
    connectionMethodParam: database.oracle-connection
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string


- name: autocreate-db-idm
  label: common.group.db.idm.label
  category: DATABASES

- name: autocreate-db-bvd
  label: common.group.db.bvd.label
  category: DATABASES

- name: autocreate-db-autopass
  label: common.group.db.apls.label
  category: DATABASES

- name: autocreate-db-obmevent
  label: opsb.group.relationaldb.obm.event.label
  category: DATABASES

- name: autocreate-db-obmmgmt
  label: opsb.group.relationaldb.obm.mgmt.label
  category: DATABASES

- name: autocreate-db-obmrtsm
  label: opsb.group.relationaldb.obm.ucmdb.label
  category: DATABASES

- name: autocreate-db-monitoringadmin
  label: opsb.group.relationaldb.hyperscaleobservability.monitoringadmindb.label
  category: DATABASES

- name: autocreate-db-credentialmanager
  label: opsb.group.relationaldb.hyperscaleobservability.credmanager.label
  category: DATABASES

- name: autocreate-db-aec
  label: opsb.group.relationaldb.automaticeventcorrelation.aec.label
  category: DATABASES

- name: autocreate-db-monitoringsnf
  label: opsb.group.relationaldb.hyperscaleobservability.monitoringsnf.label
  category: DATABASES

- name: autocreate-db-btcd
  label: opsb.group.relationaldb.hyperscaleobservability.btcd.label
  category: DATABASES



# This is the DATABASE group for the IDM database user/pass/dbName
- name: database-idm
  label: common.group.db.idm.label
  category: DATABASES
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    databaseNameParam: persistence-db-name
    userParam: persistence-db-user
    passParam: persistence-db-pass
    connectionMethodParam: database.oracle-connection
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string

# This is the DATABASE group for the AutoPass database user/pass/dbName
- name: database-apls
  label: common.group.db.apls.label
  category: DATABASES
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    databaseNameParam: persistence-db-name-apls
    userParam: persistence-db-user-apls
    passParam: persistence-db-pass-apls
    connectionMethodParam: database.oracle-connection
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string

# This is the DATABASE group for the BVD database user/pass/dbName
- name: database-bvd
  label: common.group.db.bvd.label
  category: DATABASES
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    databaseNameParam: persistence-db-name-bvd
    userParam: persistence-db-user-bvd
    passParam: persistence-db-pass-bvd
    connectionMethodParam: database.oracle-connection
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string

# IF_DEFINED   true
# - name: wallet-config
#   label: opsb.group.relationaldb.walletconfig.label
#   category: DATABASES
# END_IF

- name: database-obm-event
  label: opsb.group.relationaldb.obm.event.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-obm-event
    userParam: persistence-db-user-obm-event
    passParam: persistence-db-pass-obm-event
  category: DATABASES

- name: database-obm-mgmt
  label: opsb.group.relationaldb.obm.mgmt.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-obm-mgmt
    userParam: persistence-db-user-obm-mgmt
    passParam: persistence-db-pass-obm-mgmt
  category: DATABASES

- name: database-ucmdb
  label: opsb.group.relationaldb.obm.ucmdb.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-ucmdb
    userParam: persistence-db-user-ucmdb
    passParam: persistence-db-pass-ucmdb
  category: DATABASES

- name: database-monitoringadmin-db
  label: opsb.group.relationaldb.hyperscaleobservability.monitoringadmindb.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-monitoringadmin
    userParam: persistence-db-user-monitoringadmin
    passParam: persistence-db-pass-monitoringadmin
  category: DATABASES

- name: database-credmanager-db
  label: opsb.group.relationaldb.hyperscaleobservability.credmanager.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-credmanager
    userParam: persistence-db-user-credmanager
    passParam: persistence-db-pass-credmanager
  category: DATABASES

- name: database-aec-db
  label: opsb.group.relationaldb.automaticeventcorrelation.aec.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-aec
    userParam: persistence-db-user-aec
    passParam: persistence-db-pass-aec
  category: DATABASES

- name: database-monitoringsnf-db
  label: opsb.group.relationaldb.hyperscaleobservability.monitoringsnf.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-monitoringsnf
    userParam: persistence-db-user-monitoringsnf
    passParam: persistence-db-pass-monitoringsnf
  category: DATABASES

- name: database-btcd-db
  label: opsb.group.relationaldb.hyperscaleobservability.btcd.label
  type:
    key: DATABASE
    providerTypeParam: database.persistence-db-type
    hostParam: database.persistence-db-host
    portParam: database.persistence-db-port
    useTlsParam: database.pg-ssl-enabled
    sidParam: database.persistence-db-oracle-sid
    connectionStringParam: database.persistence-db-oracle-connection-string
    databaseNameParam: persistence-db-name-btcd
    userParam: persistence-db-user-btcd
    passParam: persistence-db-pass-btcd
  category: DATABASES

# Overall Vertica settings
- name: vertica
  label: vertica.group.label
  description: vertica.group.desc
  category: DATABASES


# Vertica settings for Read/Write user
- name: vertica-rw
  label: vertica.group.rwuser.label
  category: DATABASES
  type:
    key: DATABASE
    providerTypeParam: vertica.vertica-db-type
    hostParam: vertica.vertica-host
    portParam: vertica.vertica-port
    useTlsParam: vertica.vertica-tls-enabled
    databaseNameParam: vertica.vertica-db-name
    userParam: vertica-rw-user
    passParam: vertica-rw-user-password

# Vertica settings for Read-Only user
- name: vertica-ro
  label: vertica.group.rouser.label
  category: DATABASES
  type:
    key: DATABASE
    providerTypeParam: vertica.vertica-db-type
    hostParam: vertica.vertica-host
    portParam: vertica.vertica-port
    useTlsParam: vertica.vertica-tls-enabled
    databaseNameParam: vertica.vertica-db-name
    userParam: vertica-ro-user
    passParam: vertica-ro-user-password

- name: vertica-resourcepool-config
  label: opsb.group.vertica.resourcepoolname.label
  description:
  category: DATABASES
# Integrations
- name: storage-class
  label: opsb.group.storageclass.label
  category: ADVANCED
- name: storage-class-obm
  label: opsb.group.obmstorageclass.label
  category: ADVANCED
- name: fluentbit-config
  label: fluentbit.group.fluentbitlabel
  category: ADVANCED
  
- name: monitoring-params
  label: common.group.monitoring.label
  category: ADVANCED

- name: cluster-role
  label: common.group.clusterrole.label
  category: ADVANCED


- name: coso-lpv-config
  label: opsb.group.cosolpv.label
  category: ADVANCED
####################################
# Parameters section
####################################
parameters:

######### General #########
- name: external-access-host
  label: common.externalHost.label
  toolTip: common.externalHost.tip
  type:
    key: STRING
    isRequired: true
    fqdn: true
  group: external-access
  helmValue:
    key: global.externalAccessHost

- name: load-balancer
  label: common.loadBalancer.label
  toolTip: common.loadBalancer.tip
  type:
    key: BOOLEAN
    isRequired: true
    userInput:
      - value: true
        dependsOn:
          andConditions:
            - parameterName: external-access.external-access-port
              valueEmpty: false
            - parameterName: external-access.nginx-port
              valueEmpty: false
    defaultValue: false
  group: external-access
  helmValue:
    key: userInput.loadBalancer

- name: external-access-port
  label: common.externalPort.label
  description: common.externalPort.desc
  toolTip: common.externalPort.tip
  type:
    key: AVAIL_PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue:   443
  group: external-access
  helmValue:
    key: global.externalAccessPort
  dependsOn:
    andConditions:
    - parameterName: load-balancer
      valueEquals: false

- name: alb-config
  group: external-access
  label: opsb.byok.alb.default.label
  description: opsb.byok.alb.default.desc
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  helmValue:
    key: global.expose.enableALB

- name: external-access-port-lb
  label: common.externalPort.lb.label
  toolTip: common.externalPort.lb.tip
  type:
    key: INTEGER
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 
  group: external-access
  helmValue:
    key: global.externalAccessPort
  dependsOn:
    andConditions:
    - parameterName: load-balancer
      valueEquals: true

- name: nginx-port
  label: common.nginxPort.label
  description: common.nginxPort.desc
  toolTip: common.nginxPort.tip
  type:
    key: AVAIL_PORT
    isRequired: false
    min: 1
    max: 65535
    defaultValue:   443
  group: external-access
  helmValue:
    key: global.nginx.httpsPort
  dependsOn:
    andConditions:
    - parameterName: load-balancer
      valueEquals: true

- name: docker-registry
  label: common.docker.reg.label
  description: common.docker.reg.desc
  type:
    key: STRING
    isRequired: true
    defaultValue: $apphub_default_registry
  group: docker-settings
  helmValue:
    key: global.docker.registry

- name: docker-orgname
  label: common.docker.org.label
  description: common.docker.org.desc
  type:
    key: STRING
    isRequired: true
    defaultValue: $apphub_default_registry_namespace
  group: docker-settings
  helmValue:
    key: global.docker.orgName


- name: apphub-deploySize
  label: opsb.deploySize.label
  toolTip: opsb.deploySize.tip
  group: general-settings
  helmValue:
    key: global.deployment.size
  type:
    key: OPTION
    isRequired: true
    isMultiselect: false
    values:
      - name: extra-large
        label: opsb.deploysize.extralarge.label
        value: extra-large
      - name: large
        label: opsb.deploysize.large.label
        value: large
      - name: medium
        label: opsb.deploysize.medium.label
        value: medium
      - name: evaluation
        label: opsb.deploysize.evaluation.label
        value: evaluation
      - name: low-footprint
        label: opsb.deploysize.lowfootprint.label
        value: low-footprint
    defaultValue:
      - medium
- name: k8s-provider
  group: byok
  label: common.byok.provider.label
  type:
    key: OPTION
    isRequired: true
    isMultiselect: false
    isImmutable: true
    values:
    - name: cdf
      label: common.byok.cdf.label
      value: cdf
    - name: aws
      label: common.byok.aws.label
      value: aws
    - name: azure
      label: common.byok.azure.label
      value: azure
    - name: openshift
      label: common.byok.openshift.label
      value: openshift
    - name: generic
      label: common.byok.generic.label
      value: generic
    defaultValue:
    - $apphub_default_k8s_provider
  helmValue:
    key: global.cluster.k8sProvider

######### Services #########

#- name: stakeholder-dashboard-param
#  label: opsb.capability.tags.sd.label
#  type:
#    key: BOOLEAN
#    isRequired: true
#    defaultValue: true
#    undefinedIfFalse: true
#  group: stakeholder-dashboard
#  helmValue:
#    key: global.services.stakeholderDashboard.deploy
#    oldKey: tags.stakeholderDashboard

#- name: reporting-param
#  label: opsb.capability.tags.reporting.label
#  type:
#    key: BOOLEAN
#    isRequired: true
#    defaultValue: true
#  group: reporting
#  helmValue:
#    key: tags.reporting

- name: analytics-param
  label: opsb.capability.tags.aec.label
  description: opsb.capability.requiresoptic.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
    undefinedIfFalse: true
  group: analytics
  helmValue:
    key: global.services.automaticEventCorrelation.deploy
    oldKey: tags.automaticEventCorrelation

- name: obm-param
  label: opsb.capability.tags.obm.label
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: false
    undefinedIfFalse: true
  group: obm
  helmValue:
    key: global.services.obm.deploy
    oldKey: tags.obm

- name: hyperscale-observability-param
  label: opsb.capability.tags.hyperscaleobservability.label
  description: opsb.capability.tags.hyperscaleobservability.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: false
    undefinedIfFalse: true
  group: hyperscale-observability
  helmValue:
    key: global.services.hyperscaleObservability.deploy
    oldKey: tags.cloudMonitoring

- name: event-only-hyperscale-observability
  label: opsb.hyperscaleobservability.eventonly.label
  description: opsb.hyperscaleobservability.eventonly.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: false
    undefinedIfFalse: true
  group: hyperscale-observability
  helmValue:
    key: global.services.hyperscaleObservability.deployLightHSO

- name: agentless-monitoring-param
  label: opsb.capability.tags.agentlessmonitoring.label
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: false
    undefinedIfFalse: true
  group: agentless-monitoring
  helmValue:
    key: global.services.agentlessMonitoring.deploy
    oldKey: tags.monitoringControlCenter

- name: application-monitoring-param
  label: opsb.capability.tags.applicationmonitoring.label
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: false
    undefinedIfFalse: true
  group: application-monitoring
  helmValue:
    key: global.services.applicationMonitoring.deploy 

- name: anomaly-detection-param
  label: opsb.capability.tags.anomalydetection.label
  description: opsb.capability.tags.anomalydetection.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: false
    undefinedIfFalse: true
  group: anomaly-detection
  helmValue:
    key: global.services.anomalyDetection.deploy
    oldKey: tags.anomalyDetection
- name: optic-enabled
  group: optic
  label: common.capabilities.opticReporting.enable.label
  description: common.capability.requiresoptic.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
    undefinedIfFalse: true
  helmValue:
    key: global.services.opticReporting.deploy
    oldKey: tags.reporting


- name: dashboard-enabled
  group: stakeholder-dashboard
  label: common.capabilities.dashboard.enable.label
  type:
    key: BOOLEAN
    isRequired: true
    undefinedIfFalse: true
    defaultValue: true
  helmValue:
    key: global.services.stakeholderDashboard.deploy
    oldKey: tags.stakeholderDashboard



- name: deploy-optic-mode
  group: optic-reporting
  label: opticReporting.deployMode.label
  type:
    key: OPTION
    isRequired: false
    userInput:
      - value: internal-coso
        dependsOn:
          orConditions:
            - parameterName: optic-reporting.optic-access-host
              valueEmpty: true
      - value: external-coso
        dependsOn:
          andConditions:
            - parameterName: optic-reporting.optic-access-host
              valueEmpty: false
    isMultiselect: false
    values:
    - name: internal-coso
      displayName: opticReporting.deployMode.internal.label
      value: internal-coso
    - name: external-coso
      displayName: opticReporting.deployMode.external.label
      value: external-coso
    defaultValue:
    - internal-coso
  helmValue:
    key: userInput.opticReporting.deployMode
  dependsOn:
    orConditions:
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true
    - parameterName: anomaly-detection.anomaly-detection-param
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: external-optic-connection
  group: optic-reporting
  label: opticReporting.connectMode.label
  type:
    key: OPTION
    isRequired: false
    isMultiselect: false
    userInput:
      - value: cross-namespace
        dependsOn:
          orConditions:
            - parameterName: optic-reporting.optic-shared-namespace
              valueEmpty: false
      - value: service-fqdns
        dependsOn:
          andConditions:
            - parameterName: optic-reporting.optic-di-receiver-host-serviceFQDNs
              valueEmpty: false
      - value: external-host
        dependsOn:
          andConditions:
            - parameterName: optic-reporting.optic-shared-namespace
              valueEmpty: true 
            - parameterName: optic-reporting.optic-di-receiver-host-serviceFQDNs
              valueEmpty: true
    values:
    - name: cross-namespace
      displayName: opticReporting.connectMode.namespace
      value: cross-namespace
    - name: service-fqdns
      displayName: opticReporting.connectMode.serviceFQDN
      value: service-fqdns
    - name: external-host
      displayName: opticReporting.connectMode.externalHost
      value: external-host
    defaultValue:
    - cross-namespace
  helmValue:
    key: userInput.opticreporting.connectMode
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    orConditions:
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-access-host
  group: optic-reporting
  label: opticReporting.externalHost.label
  type:
    key: STRING
    isRequired: true
    fqdn: true
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.externalAccessHost
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true


- name: optic-access-port
  group: optic-reporting
  label: opticReporting.externalPort.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 443
    hostParam: optic-access-host
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.externalAccessPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true


#
# NOM chart does not query IDM integration user, it is expected that this is "idm_integration_admin" user.
#
- name: optic-integration-user
  group: optic-reporting
  label: opticReporting.integrationUser.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.integrationUser
    oldKey: global.reporting.bvdUsername
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true



- name: optic-integration-password
  group: optic-reporting
  label: opticReporting.integrationPassword.label
  type:
    key: SECRET
    isRequired: true
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  helmValue:
    key: secrets.OPTIC_DATALAKE_INTEGRATION_PASSWORD
    oldKey: secrets.bvd_admin_password
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true


# The IDM transport password is needed for legacy IDM access due to BVD not yet using modern IDM access??



- name: optic-shared-namespace
  group: optic-reporting
  label: opticReporting.namespace.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingNamespace.namespace
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: cross-namespace
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true






- name: optic-di-receiver-host-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diReceiver.serviceFQDN.label
  type:
    key: STRING
    isRequired: true
    fqdn: true
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diReceiverHost
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-receiver-port-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diReceiver.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 30001
    hostParam: optic-di-receiver-host-serviceFQDNs
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diReceiverPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso        
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-receiver-port-externalHost
  group: optic-reporting
  label: opticReporting.diReceiver.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 30001
    hostParam: optic-access-host
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingExternalAccessHost.diReceiverPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: external-host
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true




- name: optic-di-admin-host-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diAdmin.serviceFQDN.label
  type:
    key: STRING
    isRequired: true
    fqdn: true
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diAdminHost
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-admin-port-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diAdmin.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 30004
    hostParam: optic-di-admin-host-serviceFQDNs
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diAdminPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso        
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true

- name: optic-di-admin-port-externalHost
  group: optic-reporting
  label: opticReporting.diAdmin.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 30004
    hostParam: optic-access-host
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingExternalAccessHost.diAdminPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: external-host
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true




- name: optic-di-dataAccess-host-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diDataAccess.serviceFQDN.label
  type:
    key: STRING
    isRequired: true
    fqdn: true
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diDataAccessHost
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-dataAccess-port-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diDataAccess.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 30003
    hostParam: optic-di-dataAccess-host-serviceFQDNs
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diDataAccessPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso        
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-dataAccess-port-externalHost
  group: optic-reporting
  label: opticReporting.diDataAccess.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 30003
    hostParam: optic-access-host
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingExternalAccessHost.diDataAccessPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: external-host
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true



- name: optic-di-pulsar-host-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diPulsarHost.serviceFQDN.label
  type:
    key: STRING
    isRequired: true
    fqdn: true
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diPulsarHost
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-pulsar-ssl-port-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diPulsarSsl.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 31051
    hostParam: optic-di-pulsar-host-serviceFQDNs
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diPulsarSslPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso        
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-pulsar-ssl-port-externalHost
  group: optic-reporting
  label: opticReporting.diPulsarSsl.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 31051
    hostParam: optic-access-host
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingExternalAccessHost.diPulsarSslPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: external-host
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true




- name: optic-di-pulsar-web-port-serviceFQDNs
  group: optic-reporting
  label: opticReporting.diPulsarWeb.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 31001
    hostParam: optic-di-pulsar-host-serviceFQDNs
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.diPulsarWebPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso        
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-di-pulsar-web-port-externalHost
  group: optic-reporting
  label: opticReporting.diPulsarWeb.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 31001
    hostParam: optic-access-host
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingExternalAccessHost.diPulsarWebPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: external-host
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true
    - parameterName: analytics.analytics-param
      valueEquals: true
    - parameterName: hyperscale-observability.hyperscale-observability-param
      valueEquals: true




- name: optic-ingress-controller-serviceFQDNs
  group: optic-reporting
  label: opticReporting.ingressController.serviceFQDN.label
  type:
    key: STRING
    isRequired: true
    fqdn: true
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.ingressControllerHost
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: optic-ingress-controller-port-serviceFQDNs
  group: optic-reporting
  label: opticReporting.ingressController.port.label
  type:
    key: PORT
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 443
    hostParam: optic-ingress-controller-serviceFQDNs
  helmValue:
    key: global.services.opticDataLake.externalOpticDataLake.connectUsingServiceFQDN.ingressControllerPort
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso
    - parameterName: external-optic-connection
      valueEquals: service-fqdns
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true




##############Reporting Configuration########################
- name: agent-metric-collector
  label: opsb.reporting.amce.label
  Description: opsb.reporting.amce.desc
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: optic
  helmValue:
    key: global.isAgentMetricCollectorEnabled
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: auto-start-agent-metric
  label: opsb.reporting.asam.label
  Description: opsb.reporting.asam.desc
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: true
  group: optic
  helmValue:
    key: global.autoStartAgentMetricCollector
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: external-obm
  label: opsb.reporting.externalobm.label
  description: opsb.reporting.externalobm.desc
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: optic
  helmValue:
    key: global.amc.externalOBM
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true

- name: containerized-obm
  label: opsb.reporting.containerizedobm.label
  description: opsb.reporting.containerizedobm.desc
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: optic
  helmValue:
    key: global.amc.containerizedOBM
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: obm-hostname
  label: opsb.reporting.externalobm.hostname.label
  description: opsb.reporting.externalobm.hostname.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
  group: optic
  helmValue:
    key: global.amc.obmHostname
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: obm-port
  label: opsb.reporting.externalobm.port.label
  description: opsb.reporting.externalobm.port.desc
  type:
    key: INTEGER
    isRequired: false
    min: 0
    max: 65535
    defaultValue: 443
  group: optic
  helmValue:
    key: global.amc.port
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: obm-rtsmProtocol
  label: opsb.reporting.externalobm.rtsmprotocol.label
  description: opsb.reporting.externalobm.rtsmprotocol.desc
  type:
    key: OPTION
    isMultiselect: false
    values:
      - name: https
        displayName: HTTPS
        value: https
      - name: http
        displayName: HTTP
        value: http
    defaultValue:
      - https
  group: optic
  helmValue:
    key: global.amc.rtsmProtocol
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: obm-rtsmUsername
  label: opsb.reporting.externalobm.rtsmusername.label
  description: opsb.reporting.externalobm.rtsmusername.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
  group: optic
  helmValue:
    key: global.amc.rtsmUsername
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: obm-rtsm-password
  label: opsb.reporting.externalobm.rtsmpassword.label
  description: opsb.reporting.externalobm.rtsmpassword.desc
  type:
    key: SECRET
    isRequired: true
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: optic
  helmValue:
    key: secrets.OBM_RTSM_PASSWORD
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: databroker-nodeport
  label: opsb.reporting.externalobm.dbnp.label
  description: opsb.reporting.externalobm.dbnp.desc
  type:
    key: INTEGER
    isRequired: false
    min: 0
    max: 65535
    defaultValue: 1383
  group: optic
  helmValue:
    key: global.amc.dataBrokerNodePort
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: serverPort
  label: opsb.reporting.externalobm.serverport.label
  description: opsb.reporting.externalobm.serverport.desc
  toolTip: opsb.reporting.externalobm.serverport.tooltip
  type:
    key: INTEGER
    isRequired: false
    min: 0
    max: 65535
    defaultValue: 383
  group: optic
  helmValue:
    key: global.amc.serverPort
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: itomopsbridgedatabroker
  label: opsb.reporting.externalobm.itomopsbridgedatabroker.label
  description: opsb.reporting.externalobm.itomopsbridgedatabroker.desc
  type:
    key: BOOLEAN
    defaultValue: false
  group: optic
  helmValue:
    key: userInput.itomopsbridgedatabroker.enable
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true

- name: obm-dataCollectorProtocol
  label: opsb.reporting.externalobm.datacollectorprotocol.label
  description: opsb.reporting.externalobm.datacollectorprotocol.desc
  type:
    key: OPTION
    isMultiselect: false
    values:
      - name: https
        displayName: HTTPS
        value: https
      - name: http
        displayName: HTTP
        value: http
    defaultValue:
      - https
  group: optic
  helmValue:
    key: itomopsbridgedatabroker.deployment.config.obmDataCollectorProtocol
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true
      - parameterName: itomopsbridgedatabroker
        valueEquals: true

- name: obm-dataCollectorHostname
  label: opsb.reporting.externalobm.datacollectorhostname.label
  description: opsb.reporting.externalobm.datacollectorhostname.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
  group: optic
  helmValue:
    key: itomopsbridgedatabroker.deployment.config.obmDataCollectorHostname
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true
      - parameterName: itomopsbridgedatabroker
        valueEquals: true

- name: obm-dataCollectorPort
  label: opsb.reporting.externalobm.datacollectorport.label
  description: opsb.reporting.externalobm.datacollectorport.desc
  type:
    key: INTEGER
    isRequired: true
    min: 0
    max: 65535
    defaultValue: 383
  group: optic
  helmValue:
    key: itomopsbridgedatabroker.deployment.config.obmDataCollectorPort
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true
      - parameterName: external-obm
        valueEquals: true
      - parameterName: itomopsbridgedatabroker
        valueEquals: true

- name: parallel-connection
  label: opsb.reporting.pc.label
  description: opsb.reporting.pc.desc
  type:
    key: INTEGER
    isRequired: false
    min: 0
    max: 25
    defaultValue: 25
  group: optic
  helmValue:
    key: global.amc.numOfParallelCollections
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: parallel-history-connection
  label: opsb.reporting.phc.label
  description: opsb.reporting.phc.desc
  type:
    key: INTEGER
    isRequired: false
    min: 0
    max: 25
    defaultValue: 10
  group: optic
  helmValue:
    key: global.amc.numOfParallelHistoryCollections
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: capacity-per-collector
  label: opsb.reporting.cpc.label
  description: opsb.reporting.cpc.desc
  type:
    key: INTEGER
    isRequired: false
    defaultValue: 750
  group: optic
  helmValue:
    key: global.amc.capacityPerCollector
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: capacity-per-historic-collector
  label: opsb.reporting.cphc.label
  description: opsb.reporting.cphc.desc
  type:
    key: INTEGER
    isRequired: false
    defaultValue: 750
  group: optic
  helmValue:
    key: global.amc.capacityPerHistoricCollector
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: node-refresh-interval-mins
  label: opsb.reporting.nrim.label
  description: opsb.reporting.nrim.desc
  type:
    key: INTEGER
    isRequired: false
    min: 1
    max: 720
    defaultValue: 360
  group: optic
  helmValue:
    key: global.nodeResolver.nodeRefreshIntervalMins
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true

- name: custom-tql
  label: opsb.reporting.tql.label
  description: opsb.reporting.tql.desc
  type:
    key: LIST
    isRequired: false
    values:
    allowNewValue: true
    isMultiselect: true
  group: optic
  helmValue:
    key: global.amc.customTqls
  dependsOn:
    andConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agent-metric-collector
        valueEquals: true

#########Reporting Configuration End########

##############OBM Configuration########################
- name: obm-bbc-port
  label: opsb.obm.bbcPort.label
  type:
    key: INTEGER
    isRequired: true
    min: 1
    max: 65535
    defaultValue: 383
  group: obm
  helmValue:
    key: obm.bbc.port
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: obm.obm-param
        valueEquals: true

- name: obm-high-availability
  label: opsb.obm.haenabled.label
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
  group: obm
  helmValue:
    key: obm.params.haEnabled
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: obm-postgresCrlCheckEnabled
  label: opsb.obm.postgrescrlcheck.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: true
  group: obm
  helmValue:
    key: obm.deployment.database.postgresCrlCheckEnabled
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: ADMP
  label: opsb.obm.admp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.ADMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: AMCMP
  label: opsb.obm.amcmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.AMCMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: AWSMP
  label: opsb.obm.awsmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.AmazonWebServicesMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: BPMContent
  label: opsb.obm.BPMContent.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.BPMContent
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: DiagnosticsMP
  label: opsb.obm.DiagnosticsMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.DiagnosticsMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: Example_Policy_Templates
  label: opsb.obm.Example_Policy_Templates.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.Example_Policy_Templates
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: ExchangeMP
  label: opsb.obm.exchangemp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.ExchangeMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: GoogleCloudMP
  label: opsb.obm.GoogleCloudMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.GoogleCloudMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: HANAMP
  label: opsb.obm.hanamp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.HANAMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: IISMP
  label: opsb.obm.IISMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.IISMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: InfraMP
  label: opsb.obm.inframp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: true
  group: obm
  helmValue:
    key: obm.params.managementPacks.InfraMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: JbsMP
  label: opsb.obm.JbsMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.JbsMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: MSSQLMP
  label: opsb.obm.mssqlmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.MSSQLMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: Microsoft365MP
  label: opsb.obm.Microsoft365MP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.Microsoft365MP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: MicrosoftAzureMP
  label: opsb.obm.MicrosoftAzureMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.MicrosoftAzureMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: MySQLMP
  label: opsb.obm.mysqlmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.MySQLMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: OraMP
  label: opsb.obm.oramp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.OraMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: PostgreSQLMP
  label: opsb.obm.PostgreSQLMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.PostgreSQLMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: RealUserMonitorMP
  label: opsb.obm.RealUserMonitorMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.RealUserMonitorMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: SAPMP
  label: opsb.obm.sapmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.SAPMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: SiteScopeMetricStreamingMP
  label: opsb.obm.SiteScopeMetricStreamingMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.SiteScopeMetricStreamingMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: SiteScope_Event_Integration
  label: opsb.obm.SiteScope_Event_Integration.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.SiteScope_Event_Integration
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: VMWareInfraMP
  label: opsb.obm.VMWareInfraMP.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.VMWareInfraMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: WbsMP
  label: opsb.obm.wbsmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.WbsMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true

- name: WebLogicMP
  label: opsb.obm.weblogicmp.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: obm
  helmValue:
    key: obm.params.managementPacks.WebLogicMP
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true
############### CloudMonitoring Configuration##########
#- name: ud-collection-enabled
#  label: opsb.hyperscaleobservability.udcollection.label
#  Description: opsb.hyperscaleobservability.udcollection.desc
#  type:
#    key: BOOLEAN
#    isRequired: false
#    defaultValue: true
#  group: hyperscale-observability
#  helmValue:
#    key: global.isUDCollectionEnabled
#  dependsOn:
#    andConditions:
#      - parameterName: hyperscale-observability-param
#        valueEquals: true

- name: external-obm-enabled
  label: opsb.hyperscaleobservability.externalobm.label
  description: opsb.hyperscaleobservability.externalobm.desc
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: false
  group: hyperscale-observability
  helmValue:
    key: global.cms.externalOBM
  dependsOn:
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

- name: ud-protocol
  label: opsb.hyperscaleobservability.udprotocol.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
    defaultValue: "https"
  group: hyperscale-observability
  helmValue:
    key: global.cms.udProtocol
  dependsOn:
    andConditions:
      - parameterName: external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

- name: ud-hostname
  label: opsb.hyperscaleobservability.udhostname.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
  group: hyperscale-observability
  helmValue:
    key: global.cms.udHostname
  dependsOn:
    andConditions:
      - parameterName: external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

- name: ud-port
  label: opsb.hyperscaleobservability.udport.label
  type:
    key: PORT
    isRequired: true
    min: 0
    max: 65535
    defaultValue: 8443
    hostParam: ud-hostname
    useTlsParam: true
    connectType: https
    trustedCAListParam: trust.trusted-ca-list
  group: hyperscale-observability
  helmValue:
    key: global.cms.port
  dependsOn:
    andConditions:
      - parameterName: external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

- name: ud-username
  label: opsb.hyperscaleobservability.udusername.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
  group: hyperscale-observability
  helmValue:
    key: global.cms.udUsername
  dependsOn:
    andConditions:
      - parameterName: external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

- name: ud-password
  label: opsb.hyperscaleobservability.udpassword.label
  description: opsb.hyperscaleobservability.udpassword.desc
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: hyperscale-observability
  helmValue:
    key: secrets.UD_USER_PASSWORD
  dependsOn:
    andConditions:
      - parameterName: external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

- name: ucmdb-port
  label: opsb.hyperscaleobservability.ucmdbport.label
  description: opsb.hyperscaleobservability.ucmdbport.desc
  type:
    key: INTEGER
    isRequired: true
    min: 0
    max: 65535
    defaultValue: 8443
  group: hyperscale-observability
  helmValue:
    key: ucmdbprobe.deployment.ucmdbServer.port
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: probeSSLFullValidation
  label: opsb.hyperscaleobservability.probevalidation.label
  type:
    key: OPTION
    isMultiselect: false
    values:
      - name: option0
        displayName: Full validation
        value: 0
      - name: option1
        displayName: Full validation without revocation check (default)
        value: 1
      - name: option2
        displayName: Basic validation
        value: 2
    defaultValue:
      - option1
  group: hyperscale-observability
  helmValue:
    key: ucmdbprobe.deployment.probeSSLFullValidation
  dependsOn:
    andConditions:
      - parameterName: external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability-param
        valueEquals: true
      - parameterName: event-only-hyperscale-observability
        valueEquals: true

## for aws scenarion alb not there
- name: external-dns
  label: common.cloud.externalDns.label
  description: common.cloud.externalDns.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
  group: cloud-config
  helmValue:
    key: global.di.externalDNS.enabled
    oldKey: global.di.cloud.externalDNS.enabled
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: false
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-pulsar
  label: common.cloud.externalHost.label
  description: common.cloud.externalHost.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.pulsar
    oldKey: global.di.cloud.externalAccessHost.pulsar
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: false
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-administration
  label: common.cloud.externalHost-administration.label
  description: common.cloud.externalHost-administration.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.administration
    oldKey: global.di.cloud.externalAccessHost.administration
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: false
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-dataAccess
  label: common.cloud.externalHost-dataAccess.label
  description: common.cloud.externalHost-dataAccess.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.dataAccess
    oldKey: global.di.cloud.externalAccessHost.dataAccess
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: false
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-receiver
  label: common.cloud.externalHost-receiver.label
  description: common.cloud.externalHost-receiver.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.receiver
    oldKey: global.di.cloud.externalAccessHost.receiver
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: false
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

##for aws with alb
- name: external-dns-toggle-alb
  label: common.cloud.externalDns.label
  description: common.cloud.externalDns.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
  group: cloud-config
  helmValue:
    key: global.di.externalDNS.enabled
    oldKey: global.di.cloud.externalDNS.enabled
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: true
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-pulsar-alb
  label: common.cloud.externalHost.label
  description: common.cloud.externalHost.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.pulsar
    oldKey: global.di.cloud.externalAccessHost.pulsar
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: true
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-administration-alb
  label: common.cloud.externalHost-administration.label
  description: common.cloud.externalHost-administration.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.administration
    oldKey: global.di.cloud.externalAccessHost.administration
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: true
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-dataAccess-alb
  label: common.cloud.externalHost-dataAccess.label
  description: common.cloud.externalHost-dataAccess.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.dataAccess
    oldKey: global.di.cloud.externalAccessHost.dataAccess
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: true
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-receiver-alb
  label: common.cloud.externalHost-receiver.label
  description: common.cloud.externalHost-receiver.desc
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.receiver
    oldKey: global.di.cloud.externalAccessHost.receiver
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: external-access.alb-config
        valueEquals: true
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true


#FOR anything except aws
- name: cloud-external-access-host-pulsar-cdf
  label: common.cloud.externalHost.label
  description: common.cloud.externalHost.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.pulsar
    oldKey: global.di.cloud.externalAccessHost.pulsar
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-administration-cdf
  label: common.cloud.externalHost-administration.label
  description: common.cloud.externalHost-administration.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.administration
    oldKey: global.di.cloud.externalAccessHost.administration
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-dataAccess-cdf
  label: common.cloud.externalHost-dataAccess.label
  description: common.cloud.externalHost-dataAccess.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.dataAccess
    oldKey: global.di.cloud.externalAccessHost.dataAccess
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cloud-external-access-host-receiver-cdf
  label: common.cloud.externalHost-receiver.label
  description: common.cloud.externalHost-receiver.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.di.externalAccessHost.receiver
    oldKey: global.di.cloud.externalAccessHost.receiver
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueNotEquals: external-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: loadbalancer-ip
  label: common.loadbalancer.ip.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 64
  group: cloud-config
  helmValue:
    key: global.expose.internalLoadBalancer.ip
    oldkey: global.loadBalancer.ip
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: azure


#INCLUDE: opsb/bvd-smtpparams.yaml

######### Security #########
- name: opsbridge-admin-password
  label: opsb.opsbridgeadmin.password.label
  type:
    key: SECRET
    isRequired: true
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: system-security
  helmValue:
    key: secrets.idm_opsbridge_admin_password
  dependsOn:
    andConditions:
      - parameterName: external-access.external-access-port
        valueNotEquals: -1

- name: trusted-ca-list
  # If suite-specific message key is defined, use it, otherwise use the default message key
  label: common.security.tlsCerts.label
  toolTip: common.security.tlsCerts.tip
  type:
    isRequired: false
    key: MULTI_FILE
    listMax: 25
    maxMessage: common.security.tlsCerts.max
  group: trust
  helmValue:
    key: caCertificates

- name: api-client-ca-list
  label: common.security.clientCerts.label
  toolTip: common.security.clientCerts.tip
  type:
    isRequired: false
    key: MULTI_FILE
    listMax: 25
    maxMessage: common.security.clientCerts.max
  group: client-certs
  helmValue:
    key: authorizedClientCAs
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: internal-coso
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true

- name: security-context-user
  label: common.security.uid.label
  description: common.security.uid.desc
  type:
    key: INTEGER
    isRequired: false
    min: 1
    max: 2000000000
    defaultValue: $apphub_default_uid
    isImmutable: true
  group: uid-gid
  helmValue:
    key: global.securityContext.user

- name: security-context-group
  label: common.security.gid.label
  description: common.security.gid.desc
  type:
    key: INTEGER
    isRequired: false
    min: 1
    max: 2000000000
    defaultValue: $apphub_default_gid
    isImmutable: true
  group: uid-gid
  helmValue:
    key: global.securityContext.fsGroup

- name: format-type
  label: common.servercert.format.label
  type:
    key: OPTION
    values:
    - name: PKCS8
      label: PKCS8
      value: PKCS8
    - name: PKCS12
      label: PKCS12
      value: PKCS12
    isMultiselect: false
    defaultValue:
    - PKCS8
  group: server-certs
  helmValue:
    key: userInput.tls.formatType


# CA Certificate can be provided for both PKCS12 and PKCS8
- name: ca-cert
  label: common.servercert.cacert.label
  type:
    key: FILE
    isRequired: false
  group: server-certs
  helmValue:
    key: userInput.tls.caCert
  dependsOn:
    orConditions:
    - parameterName: format-type
      valueEquals: PKCS8
    - parameterName: format-type
      valueEquals: PKCS12

# PKCS8-only: server certificate file and private key file
- name: server-cert
  label: common.servercert.servercert.label
  description: common.servercert.servercert.desc
  type:
    key: FILE
    isRequired: true
  group: server-certs
  helmValue:
    key: userInput.tls.serverCert
  dependsOn:
    andConditions:
    - parameterName: format-type
      valueEquals: PKCS8

- name: private-key
  label: common.servercert.privatekey.label
  type:
    key: FILE
    isRequired: true
  group: server-certs
  helmValue:
    key: userInput.tls.privateKey
  dependsOn:
    andConditions:
    - parameterName: format-type
      valueEquals: PKCS8

# private key password is applicable for both PCKS8 and PKCS12
- name: private-key-password
  label: common.servercert.privatekeypass.label
  type:
    key: SECRET
    shouldValidate: false
    shouldConfirm: false
    isRequired: false
  group: server-certs
  helmValue:
    key: userInput.tls.privateKeyPassword
  dependsOn:
    orConditions:
    - parameterName: format-type
      valueEquals: PKCS8
    - parameterName: format-type
      valueEquals: PKCS12


# PKCS12 only: special PKCS12 file, plus optional file password
- name: pkcs12-cert
  label: common.servercert.pkcs12.label
  toolTip: common.servercert.pkcs12.tip
  type:
    key: FILE
    isRequired: true
  group: server-certs
  helmValue:
    key: userInput.tls.pkcs12File
  dependsOn:
    andConditions:
    - parameterName: format-type
      valueEquals: PKCS12


- name: pkcs12-cert-password
  label: common.servercert.pkcs12pass.label
  toolTip: common.servercert.pkcs12pass.tip
  type:
    key: SECRET
    shouldValidate: false
    shouldConfirm: false
    isRequired: false
  group: server-certs
  helmValue:
    key: userInput.tls.pkcs12FilePassword
  dependsOn:
    andConditions:
    - parameterName: format-type
      valueEquals: PKCS12

- name: format-type-opticdl
  label: common.servercert.format.label
  type:
    key: OPTION
    values:
      - name: PKCS8
        label: PKCS8
        value: PKCS8
      - name: PKCS12
        label: PKCS12
        value: PKCS12
    isMultiselect: false
    defaultValue:
      - PKCS8
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.formatType


# CA Certificate can be provided for both PKCS12 and PKCS8
- name: ca-cert-opticdl
  label: common.servercert.cacert.label
  type:
    key: FILE
    isRequired: false
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.caCert
  dependsOn:
    orConditions:
      - parameterName: format-type-opticdl
        valueEquals: PKCS8
      - parameterName: format-type-opticdl
        valueEquals: PKCS12

# PKCS8-only: server certificate file and private key file
- name: server-cert-opticdl
  label: common.servercert.servercert.label
  description: common.servercert.servercert.desc
  type:
    key: FILE
    isRequired: true
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.serverCert
  dependsOn:
    andConditions:
      - parameterName: format-type-opticdl
        valueEquals: PKCS8

- name: private-key-opticdl
  label: common.servercert.privatekey.label
  type:
    key: FILE
    isRequired: true
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.privateKey
  dependsOn:
    andConditions:
      - parameterName: format-type-opticdl
        valueEquals: PKCS8

# private key password is applicable for both PCKS8 and PKCS12
- name: private-key-password-opticdl
  label: common.servercert.privatekeypass.label
  type:
    key: SECRET
    shouldValidate: false
    shouldConfirm: false
    isRequired: false
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.privateKeyPassword
  dependsOn:
    orConditions:
      - parameterName: format-type-opticdl
        valueEquals: PKCS8
      - parameterName: format-type-opticdl
        valueEquals: PKCS12


# PKCS12 only: special PKCS12 file, plus optional file password
- name: pkcs12-cert-opticdl
  label: common.servercert.pkcs12.label
  toolTip: common.servercert.pkcs12.tip
  type:
    key: FILE
    isRequired: true
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.pkcs12File
  dependsOn:
    andConditions:
      - parameterName: format-type-opticdl
        valueEquals: PKCS12


- name: pkcs12-cert-password-opticdl
  label: common.servercert.pkcs12pass.label
  toolTip: common.servercert.pkcs12pass.tip
  type:
    key: SECRET
    shouldValidate: false
    shouldConfirm: false
    isRequired: false
  group: server-certs-opticdl
  helmValue:
    key: userInput.opticdl.tls.pkcs12FilePassword
  dependsOn:
    andConditions:
      - parameterName: format-type-opticdl
        valueEquals: PKCS12

######### Database  #########
##TODO: Create separate files for each capability db once changes are made to adopt common host and port
# Database Settings for the server
- name: persistence-db-type
  label: common.db.dbtype.label
  toolTip: common.db.dbtype.tip
  type:
    key: OPTION
    isRequired: true
    isMultiselect: false
    userInput:
      - value: oracle
        dependsOn:
          orConditions:
            - parameterName: database.persistence-db-oracle-connection-string
              valueEmpty: false
            - parameterName: database.persistence-db-oracle-sid
              valueEmpty: false
      - value: postgresql
        dependsOn:
          andConditions:
            - parameterName: database.db-createdb
              valueEmpty: false
            - parameterName: database.database-internal-flag-display
              valueNotEquals: true
      - value: embedded
        dependsOn:
          andConditions:
            - parameterName: database.database-internal-flag-display
              valueEquals: true
    isImmutable: true
    values:
    - name: postgresql
      label: common.db.dbtype.pg.label
      value: postgresql
    - name: oracle
      label: common.db.dbtype.oracle.label
      value: oracle
    - name: embedded
      label: common.db.dbtype.embedded.label
      value: embedded
    defaultValue:
    - postgresql
  group: database
  helmValue:
    # NOTE: This Helm value is not used, because "global.database.type" is hard-coded in the
    # NOM chart to always be postgres.  But we must have SOME Helm key here?
    key: userInput.database.type


- name: database-internal-flag-display
  label: common.displaynull
  type:
    key: BOOLEAN
    display: false
    trueValue: true
    falseValue: false
  group: database
  helmValue:
    key: global.database.internal
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: embedded




- name: oracle-connection
  label: common.db.oracle.connection.label
  type:
    key: OPTION
    isRequired: true
    userInput:
      - value: connectionString
        dependsOn:
          orConditions:
            - parameterName: database.persistence-db-oracle-connection-string
              valueEmpty: false
      - value: svcName
        dependsOn:
          orConditions:
            - parameterName: database.persistence-db-oracle-service-name
              valueEmpty: false
      - value: sid
        dependsOn:
          andConditions:
            - parameterName: database.persistence-db-oracle-sid
              valueEmpty: false
    isMultiselect: false
    values:
# The buildAppHubUI.sh script does not handle NESTED "IF" statements.
# But we can work around that with back-to-back IF statements.
    - name: connectionString
      label: common.db.oracle.connStr.label
      value: connectionString
    - name: sid
      label: common.db.oracle.sid.label
      value: sid
    defaultValue:
    - sid
  group: database
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueEquals: oracle
  helmValue:
    # NOTE: This Helm value is not used, because "global.database.type" is hard-coded in the
    # NOM chart to always be postgres.  But we must have SOME Helm key here?
    key: userInput.oracle.connection


- name: persistence-db-oracle-connection-string
  label: common.db.oracle.connStr.label
  description: common.db.oracle.connStr.desc
  type:
    key: TEXT
    isRequired: true
    minLength: 1
    maxLength: 1000
  group: database
  helmValue:
    key: global.database.oracleConnectionString
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueEquals: oracle
    - parameterName: oracle-connection
      valueEquals: connectionString


- name: persistence-db-oracle-sid
  label: common.db.oraSID.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database
  helmValue:
    key: global.database.oracleSid
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueEquals: oracle
    - parameterName: oracle-connection
      valueEquals: sid


- name: persistence-db-host
  label: common.db.dbHost.label
  toolTip: common.db.dbHost.tip
  type:
    key: STRING
    isRequired: true
    fqdn: true
    ip: true
  group: database
  helmValue:
    key: global.database.host
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueNotEquals: embedded
    - parameterName: oracle-connection
      valueNotEquals: connectionString

- name: persistence-db-port
  label: common.db.dbPort.label
  toolTip: common.db.dbPort.tip
  type:
    key: PORT
    hostParam: persistence-db-host
    useTlsParam: pg-ssl-enabled
    connectType: persistence-db-type
    trustedCAListParam: trust.trusted-ca-list
    skipHostVerifyParam: persistence-pg-ssl-skip-host-verify
    skipHostVerifyCAListParam: persistence-pg-ssl-trust-ca
    isRequired: true
  group: database
  helmValue:
    key: global.database.port
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueNotEquals: embedded
    - parameterName: oracle-connection
      valueNotEquals: connectionString

- name: pg-ssl-enabled
  label: common.db.tls.label
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
    falseMessage: common.db.ssl.false.message
    falseMessageType: warning
    falseMessageTitle: common.db.ssl.false.message.title
  group: database
  helmValue:
    key: global.database.tlsEnabled
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueNotEquals: embedded


#
# NOM does not support createDB==true, but in case OpsB/DCA do, then this fragment
# should be enabled.
#
- name: db-createdb
  label: common.db.createdb.label
  description: common.db.createdb.desc
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
    falseMessage: common.db.createDb.false.message
    falseMessageType: confirmation
    falseMessageTitle: common.db.createDb.false.message.title
  group: database
  helmValue:
    key: global.database.autoCreateDatabases
  dependsOn:
    andConditions:
    - parameterName: persistence-db-type
      valueNotEquals: embedded



# Database Settings for Admin DB (when createDb==true)
- name: dbadmin-dbname
  label: common.db.admin.dbName.label
  toolTip: common.db.admin.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-admin
  helmValue:
    key: global.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: true

- name: dbadmin-user
  label: common.db.admin.dbUser.label
  toolTip: common.db.admin.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-admin
  helmValue:
    key: global.database.admin
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true


- name: dbadmin-pass
  label: common.db.admin.dbPass.label
  type:
    key: SECRET
    complexity: none
    shouldValidate: false
    shouldConfirm: false
  group: database-admin
  helmValue:
    key: secrets.DB_ADMIN_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true


# Database Settings for IDM DB instance
- name: persistence-db-name
  label: common.db.idm.dbName.label
  toolTip: common.db.idm.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-idm
  helmValue:
    key: idm.deployment.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: false


- name: persistence-db-user
  label: common.db.idm.dbUser.label
  toolTip: common.db.idm.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-idm
  helmValue:
    key: idm.deployment.database.user
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: false


- name: persistence-db-pass
  label: common.db.idm.dbPass.label
  toolTip: common.db.idm.dbPass.tip
  type:
    key: SECRET
    complexity: none
    shouldValidate: false
    shouldConfirm: false
  group: database-idm
  helmValue:
    key:   secrets.IDM_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: false

#Database settings for IDM DB instance when autocreate database is enabled
- name: persistence-db-name-autocreate
  label: common.db.idm.dbName.label
  toolTip: common.autocreate.db.idm.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_idm
    minLength: 1
    maxLength: 100
  group: autocreate-db-idm
  helmValue:
    key: idm.deployment.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: true

- name: persistence-db-user-autocreate
  label: common.db.idm.dbUser.label
  toolTip: common.autocreate.db.idm.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_idm
    minLength: 1
    maxLength: 100
  group: autocreate-db-idm
  helmValue:
    key: idm.deployment.database.user
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true


- name: persistence-db-pass-autocreate
  label: common.autocreate.db.idm.dbPass.label
  toolTip: common.autocreate.db.idm.dbPass.tip
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-idm
  helmValue:
    key:   secrets.IDM_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true


# Database Settings for AutoPass DB instance
- name: persistence-db-name-apls
  label: common.db.apls.dbName.label
  toolTip: common.db.apls.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-apls
  helmValue:
    key: autopass.deployment.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: false


- name: persistence-db-user-apls
  label: common.db.apls.dbUser.label
  toolTip: common.db.apls.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-apls
  helmValue:
    key: autopass.deployment.database.user
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: false


- name: persistence-db-pass-apls
  label: common.db.apls.dbPass.label
  toolTip: common.db.apls.dbPass.tip
  type:
    key: SECRET
    complexity: none
    shouldValidate: false
    shouldConfirm: false
  group: database-apls
  helmValue:
    key:   secrets.AUTOPASS_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: false

#Database settings for AutoPass DB instance when autocreate database is enabled
- name: persistence-db-name-apls-autocreate
  label: common.db.apls.dbName.label
  toolTip: common.autocreate.db.apls.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_autopass
    minLength: 1
    maxLength: 100
  group: autocreate-db-autopass
  helmValue:
    key: autopass.deployment.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: true


- name: persistence-db-user-apls-autocreate
  label: common.db.apls.dbUser.label
  toolTip: common.autocreate.db.apls.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_autopass
    minLength: 1
    maxLength: 100
  group: autocreate-db-autopass
  helmValue:
    key: autopass.deployment.database.user
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true


- name: persistence-db-pass-apls-autocreate
  label: common.autocreate.db.apls.dbPass.label
  toolTip: common.autocreate.db.apls.dbPass.tip
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-autopass
  helmValue:
    key:   secrets.AUTOPASS_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true


# Database Settings for BVD DB instance
- name: persistence-db-name-bvd
  label: common.db.bvd.dbName.label
  toolTip: common.db.bvd.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-bvd
  helmValue:
    key: bvd.deployment.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: false
    orConditions:
    - parameterName: stakeholder-dashboard.dashboard-enabled
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: persistence-db-user-bvd
  label: common.db.bvd.dbUser.label
  toolTip: common.db.bvd.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 100
  group: database-bvd
  helmValue:
    key: bvd.deployment.database.user
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: false
    orConditions:
    - parameterName: stakeholder-dashboard.dashboard-enabled
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: persistence-db-pass-bvd
  label: common.db.bvd.dbPass.label
  toolTip: common.db.bvd.dbPass.tip
  type:
    key: SECRET
    complexity: none
    shouldValidate: false
    shouldConfirm: false
  group: database-bvd
  helmValue:
    key:   secrets.BVD_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: false
    orConditions:
    - parameterName: stakeholder-dashboard.dashboard-enabled
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true

#Database settings for BVD DB instance when autocreate database is enabled
- name: persistence-db-name-bvd-autocreate
  label: common.db.bvd.dbName.label
  toolTip: common.autocreate.db.bvd.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_bvd
    minLength: 1
    maxLength: 100
  group: autocreate-db-bvd
  helmValue:
    key: bvd.deployment.database.dbName
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: postgresql
    - parameterName: database.db-createdb
      valueEquals: true
    orConditions:
    - parameterName: stakeholder-dashboard.dashboard-enabled
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: persistence-db-user-bvd-autocreate
  label: common.db.bvd.dbUser.label
  toolTip: common.autocreate.db.bvd.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_bvd
    minLength: 1
    maxLength: 100
  group: autocreate-db-bvd
  helmValue:
    key: bvd.deployment.database.user
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true
    orConditions:
    - parameterName: stakeholder-dashboard.dashboard-enabled
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true


- name: persistence-db-pass-bvd-autocreate
  label: common.autocreate.db.bvd.dbPass.label
  toolTip: common.autocreate.db.bvd.dbPass.tip
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-bvd
  helmValue:
    key:   secrets.BVD_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueNotEquals: embedded
    - parameterName: database.db-createdb
      valueEquals: true
    orConditions:
    - parameterName: stakeholder-dashboard.dashboard-enabled
      valueEquals: true
    - parameterName: optic.optic-enabled
      valueEquals: true

- name: oracle-db-wallet-bvd
  label: common.relationaldb.oraclewallet.file.label
  description: common.relationaldb.oraclewallet.file.desc
  type:
    key: FILE
    isRequired: true
    extFilter: ".zip"
  group: wallet-config
  helmValue:
    key: oracleWallet
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: oracle
      - parameterName: database.pg-ssl-enabled
        valueEquals: true
    orConditions:
      - parameterName: stakeholder-dashboard.dashboard-enabled
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-aec
  label: opsb.relationaldb.aec.dbName.label
  toolTip: opsb.relationaldb.aec.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-aec-db
  helmValue:
    key: aec.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: analytics.analytics-param
        valueEquals: true

- name: persistence-db-user-aec
  label: opsb.relationaldb.aec.dbUser.label
  toolTip: opsb.relationaldb.aec.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-aec-db
  helmValue:
    key: aec.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: analytics.analytics-param
        valueEquals: true

- name: persistence-db-pass-aec
  label: opsb.relationaldb.aec.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-aec-db
  helmValue:
    key: secrets.AEC_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: analytics.analytics-param
        valueEquals: true


#Database settings for AEC DB instances when autocreate database is enabled

- name: persistence-db-name-aec-autocreate
  label: opsb.relationaldb.aec.dbName.label
  toolTip: opsb.autocreatedb.aec.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_aec
    minLength: 1
    maxLength: 10000
  group: autocreate-db-aec
  helmValue:
    key: aec.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: analytics.analytics-param
        valueEquals: true

- name: persistence-db-user-aec-autocreate
  label: opsb.relationaldb.aec.dbUser.label
  toolTip: opsb.autocreatedb.aec.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_aecuser
    minLength: 1
    maxLength: 10000
  group: autocreate-db-aec
  helmValue:
    key: aec.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: analytics.analytics-param
        valueEquals: true

- name: persistence-db-pass-aec-autocreate
  label: opsb.autocreatedb.aec.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-aec
  helmValue:
    key: secrets.AEC_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: analytics.analytics-param
        valueEquals: true
- name: persistence-db-name-obm-event
  label: opsb.relationaldb.obmevent.dbName.label
  toolTip: opsb.relationaldb.obmevent.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-obm-event
  helmValue:
    key: obm.deployment.eventDatabase.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-user-obm-event
  label: opsb.relationaldb.obmevent.dbUser.label
  toolTip: opsb.relationaldb.obmevent.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-obm-event
  helmValue:
    key: obm.deployment.eventDatabase.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-pass-obm-event
  label: opsb.relationaldb.obmevent.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-obm-event
  helmValue:
    key: secrets.OBM_EVENT_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-name-obm-mgmt
  label: opsb.relationaldb.obmmgmt.dbName.label
  toolTip: opsb.relationaldb.obmmgmt.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-obm-mgmt
  helmValue:
    key: obm.deployment.mgmtDatabase.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-user-obm-mgmt
  label: opsb.relationaldb.obmmgmt.dbUser.label
  toolTip: opsb.relationaldb.obmmgmt.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-obm-mgmt
  helmValue:
    key: obm.deployment.mgmtDatabase.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-pass-obm-mgmt
  label: opsb.relationaldb.obmmgmt.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-obm-mgmt
  helmValue:
    key: secrets.OBM_MGMT_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-name-ucmdb
  label: opsb.relationaldb.obmrtsm.dbName.label
  toolTip: opsb.relationaldb.obmrtsm.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-ucmdb
  helmValue:
    key: ucmdbserver.deployment.database.dbName
    oldKey: obm.ucmdbserver.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-user-ucmdb
  label: opsb.relationaldb.obmrtsm.dbUser.label
  toolTip: opsb.relationaldb.obmrtsm.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-ucmdb
  helmValue:
    key: ucmdbserver.deployment.database.user
    oldKey: obm.ucmdbserver.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-pass-ucmdb
  label: opsb.relationaldb.obmrtsm.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-ucmdb
  helmValue:
    key: secrets.RTSM_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

#Database settings for OBM Event, OBM Mgmt and OBM RTSM DB instances when autocreate database is enabled
- name: persistence-db-name-obm-event-autocreate
  label: opsb.relationaldb.obmevent.dbName.label
  toolTip: opsb.autocreatedb.obmevent.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_obm_event
    minLength: 1
    maxLength: 10000
  group: autocreate-db-obmevent
  helmValue:
    key: obm.deployment.eventDatabase.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-user-obm-event-autocreate
  label: opsb.relationaldb.obmevent.dbUser.label
  toolTip: opsb.autocreatedb.obmevent.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_obm_event
    minLength: 1
    maxLength: 10000
  group: autocreate-db-obmevent
  helmValue:
    key: obm.deployment.eventDatabase.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-pass-obm-event-autocreate
  label: opsb.autocreatedb.obmevent.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-obmevent
  helmValue:
    key: secrets.OBM_EVENT_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-name-obm-mgmt-autocreate
  label: opsb.relationaldb.obmmgmt.dbName.label
  toolTip: opsb.autocreatedb.obmmgmt.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_obm_mgmt
    minLength: 1
    maxLength: 10000
  group: autocreate-db-obmmgmt
  helmValue:
    key: obm.deployment.mgmtDatabase.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-user-obm-mgmt-autocreate
  label: opsb.relationaldb.obmmgmt.dbUser.label
  toolTip: opsb.autocreatedb.obmmgmt.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_obm_mgmt
    minLength: 1
    maxLength: 10000
  group: autocreate-db-obmmgmt
  helmValue:
    key: obm.deployment.mgmtDatabase.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-pass-obm-mgmt-autocreate
  label: opsb.autocreatedb.obmmgmt.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-obmmgmt
  helmValue:
    key: secrets.OBM_MGMT_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-name-ucmdb-autocreate
  label: opsb.relationaldb.obmrtsm.dbName.label
  toolTip: opsb.autocreatedb.obmrtsm.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_rtsm
    minLength: 1
    maxLength: 10000
  group: autocreate-db-obmrtsm
  helmValue:
    key: ucmdbserver.deployment.database.dbName
    oldKey: obm.ucmdbserver.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-user-ucmdb-autocreate
  label: opsb.relationaldb.obmrtsm.dbUser.label
  toolTip: opsb.autocreatedb.obmrtsm.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_rtsm
    minLength: 1
    maxLength: 10000
  group: autocreate-db-obmrtsm
  helmValue:
    key: ucmdbserver.deployment.database.user
    oldKey: obm.ucmdbserver.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-pass-ucmdb-autocreate
  label: opsb.autocreatedb.obmrtsm.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-obmrtsm
  helmValue:
    key: secrets.RTSM_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true
- name: persistence-db-name-monitoringadmin
  label: opsb.relationaldb.monitoringadmin.dbName.label
  toolTip: opsb.relationaldb.monitoringadmin.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-monitoringadmin-db
  helmValue:
    key: itomopsbridgemonitoringadmin.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-user-monitoringadmin
  label: opsb.relationaldb.monitoringadmin.dbUser.label
  toolTip: opsb.relationaldb.monitoringadmin.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-monitoringadmin-db
  helmValue:
    key: itomopsbridgemonitoringadmin.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-pass-monitoringadmin
  label: opsb.relationaldb.monitoringadmin.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-monitoringadmin-db
  helmValue:
    key: secrets.MA_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-credmanager
  label: opsb.relationaldb.credmanager.dbName.label
  toolTip: opsb.relationaldb.credmanager.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-credmanager-db
  helmValue:
    key: credentialmanager.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true
      

- name: persistence-db-user-credmanager
  label: opsb.relationaldb.credmanager.dbUser.label
  toolTip: opsb.relationaldb.credmanager.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-credmanager-db
  helmValue:
    key: credentialmanager.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-pass-credmanager
  label: opsb.relationaldb.credmanager.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-credmanager-db
  helmValue:
    key: secrets.CM_DB_PASSWD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-monitoringsnf
  label: opsb.relationaldb.monitoringsnf.dbName.label
  toolTip: opsb.relationaldb.monitoringsnf.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-monitoringsnf-db
  helmValue:
    key: itommonitoringsnf.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-user-monitoringsnf
  label: opsb.relationaldb.monitoringsnf.dbUser.label
  toolTip: opsb.relationaldb.monitoringsnf.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-monitoringsnf-db
  helmValue:
    key: itommonitoringsnf.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-pass-monitoringsnf
  label: opsb.relationaldb.monitoringsnf.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-monitoringsnf-db
  helmValue:
    key: secrets.SNF_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: false
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-btcd
  label: opsb.relationaldb.btcd.dbName.label
  toolTip: opsb.relationaldb.btcd.dbName.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-btcd-db
  helmValue:
    key: nommetricstransform.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false


- name: persistence-db-user-btcd
  label: opsb.relationaldb.btcd.dbUser.label
  toolTip: opsb.relationaldb.btcd.dbUser.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 10000
  group: database-btcd-db
  helmValue:
    key: nommetricstransform.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

- name: persistence-db-pass-btcd
  label: opsb.relationaldb.btcd.dbPass.label
  type:
    key: SECRET
    complexity: optional;none
    shouldValidate: false
    shouldConfirm: false
  group: database-btcd-db
  helmValue:
    key: secrets.BTCD_DB_PASSWD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: false

#Database settings for Monitoring DB instances when autocreate database is enabled
- name: persistence-db-name-monitoringadmin-autocreate
  label: opsb.relationaldb.monitoringadmin.dbName.label
  toolTip: opsb.autocreatedb.monitoringadmin.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_monitoringadmindb
    minLength: 1
    maxLength: 10000
  group: autocreate-db-monitoringadmin
  helmValue:
    key: itomopsbridgemonitoringadmin.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-user-monitoringadmin-autocreate
  label: opsb.relationaldb.monitoringadmin.dbUser.label
  toolTip: opsb.autocreatedb.monitoringadmin.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_monitoringadminuser
    minLength: 1
    maxLength: 10000
  group: autocreate-db-monitoringadmin
  helmValue:
    key: itomopsbridgemonitoringadmin.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-pass-monitoringadmin-autocreate
  label: opsb.autocreatedb.monitoringadmin.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-monitoringadmin
  helmValue:
    key: secrets.MA_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-credmanager-autocreate
  label: opsb.relationaldb.credmanager.dbName.label
  toolTip: opsb.autocreatedb.credmanager.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_credentialmanager
    minLength: 1
    maxLength: 10000
  group: autocreate-db-credentialmanager
  helmValue:
    key: credentialmanager.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-user-credmanager-autocreate
  label: opsb.relationaldb.credmanager.dbUser.label
  toolTip: opsb.autocreatedb.credmanager.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_credentialmanageruser
    minLength: 1
    maxLength: 10000
  group: autocreate-db-credentialmanager
  helmValue:
    key: credentialmanager.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-pass-credmanager-autocreate
  label: opsb.autocreatedb.credmanager.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-credentialmanager
  helmValue:
    key: secrets.CM_DB_PASSWD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: agentless-monitoring.agentless-monitoring-param
        valueEquals: true
      - parameterName: application-monitoring.application-monitoring-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-monitoringsnf-autocreate
  label: opsb.relationaldb.monitoringsnf.dbName.label
  toolTip: opsb.autocreatedb.monitoringsnf.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_monitoringsnfdb
    minLength: 1
    maxLength: 10000
  group: autocreate-db-monitoringsnf
  helmValue:
    key: itommonitoringsnf.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueEquals: postgresql
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-user-monitoringsnf-autocreate
  label: opsb.relationaldb.monitoringsnf.dbUser.label
  toolTip: opsb.autocreatedb.monitoringsnf.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_monitoringsnfuser
    minLength: 1
    maxLength: 10000
  group: autocreate-db-monitoringsnf
  helmValue:
    key: itommonitoringsnf.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-pass-monitoringsnf-autocreate
  label: opsb.autocreatedb.monitoringsnf.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-monitoringsnf
  helmValue:
    key: secrets.SNF_DB_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: database.db-createdb
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: persistence-db-name-btcd-autocreate
  label: opsb.relationaldb.btcd.dbName.label
  toolTip: opsb.autocreatedb.btcd.dbName.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_btcd
    minLength: 1
    maxLength: 10000
  group: autocreate-db-btcd
  helmValue:
    key: nommetricstransform.deployment.database.dbName
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-user-btcd-autocreate
  label: opsb.relationaldb.btcd.dbUser.label
  toolTip: opsb.autocreatedb.btcd.dbUser.tip
  type:
    key: STRING
    isRequired: true
    defaultValue: opsb_btcd
    minLength: 1
    maxLength: 10000
  group: autocreate-db-btcd
  helmValue:
    key: nommetricstransform.deployment.database.user
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true

- name: persistence-db-pass-btcd-autocreate
  label: opsb.autocreatedb.btcd.dbPass.label
  type:
    key: SECRET
    complexity: default
    shouldValidate: true
    shouldConfirm: true
  group: autocreate-db-btcd
  helmValue:
    key: secrets.BTCD_DB_PASSWD_KEY
  dependsOn:
    andConditions:
      - parameterName: database.persistence-db-type
        valueNotEquals: embedded
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: database.db-createdb
        valueEquals: true
- name: vertica-db-type
  label: vertica.dbType.label
  type:
    key: OPTION
    isRequired: true
    userInput:
      - value: vertica
        dependsOn:
          andConditions:
            - parameterName: vertica.vertica-host
              valueEmpty: false
            - parameterName: vertica.embedded-vertica-display
              valueEquals: false
      - value: embedded
        dependsOn:
          andConditions:
            - parameterName: vertica.embedded-vertica-display
              valueEquals: true
    isMultiselect: false
    values:
      - name: vertica
        label: vertica.dbType.external.label
        value: vertica
      - name: embedded
        label: vertica.dbType.embedded.label
        value: embedded
    defaultValue:
      - vertica
  group: vertica
  helmValue:
    key: userInput.verticaType
  dependsOn:
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: embedded-vertica-display
  label: none
  type:
    key: BOOLEAN
    display: false
    trueValue: true
    falseValue: false
  group: vertica
  helmValue:
    key: global.vertica.embedded
  dependsOn:
    orConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: embedded


- name: vertica-host
  label: vertica.dbHost.label
  description: vertica.dbHost.desc
  toolTip: vertica.dbHost.tip
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
  group: vertica
  helmValue:
    key: global.vertica.host
  dependsOn:
    andConditions:
      - parameterName: vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-port
  label: vertica.dbPort.label
  type:
    key: PORT
    isRequired: true
    min: 0
    max: 65535
    defaultValue: 5433
    hostParam: vertica-host
    useTlsParam: vertica-tls-enabled
    connectType: postgres
    trustedCAListParam: trust.trusted-ca-list
  group: vertica
  helmValue:
    key: global.vertica.port
  dependsOn:
    andConditions:
      - parameterName: vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-tls-enabled
  label: vertica.dbTls.label
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
    falseMessage: common.db.ssl.false.message
    falseMessageType: warning
    falseMessageTitle: common.db.ssl.false.message.title
  group: vertica
  helmValue:
    key: global.vertica.tlsEnabled
  dependsOn:
    andConditions:
      - parameterName: vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true


- name: vertica-db-name
  label: vertica.dbName.label
  type:
    key: STRING
    isRequired: true
    defaultValue: itomdb
    minLength: 1
    maxLength: 128
  group: vertica
  helmValue:
    key: global.vertica.db
  dependsOn:
    andConditions:
      - parameterName: vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-rw-user
  label: vertica.dbRwUser.label
  description: vertica.dbRwUser.desc
  type:
    key: STRING
    isRequired: true
    defaultValue: vertica_rwuser
    minLength: 1
    maxLength: 128
  group: vertica-rw
  helmValue:
    key: global.vertica.rwuser
  dependsOn:
    andConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-rw-user-password
  label: vertica.dbRwPass.label
  type:
    key: SECRET
    isRequired: true
    complexity: none
    shouldValidate: false
    shouldConfirm: false
  group: vertica-rw
  helmValue:
    key: secrets.ITOMDI_DBA_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-ro-user
  label: vertica.dbRoUser.label
  description: vertica.dbRoUser.desc
  type:
    key: STRING
    isRequired: true
    defaultValue: vertica_rouser
    minLength: 1
    maxLength: 128
  group: vertica-ro
  helmValue:
    key: global.vertica.rouser
  dependsOn:
    andConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-ro-user-password
  label: vertica.dbRoPass.label
  type:
    key: SECRET
    isRequired: true
    complexity: none
    shouldValidate: false
    shouldConfirm: false
  group: vertica-ro
  helmValue:
    key: secrets.ITOMDI_RO_USER_PASSWORD_KEY
  dependsOn:
    andConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: vertica
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-resourcepool-name
  label: opsb.vertica.resourcepoolname.label
  description: opsb.vertica.resourcepoolname.desc
  type:
    key: STRING
    isRequired: true
    defaultValue: itom_di_stream_respool_provider_default
  group: vertica-resourcepool-config
  helmValue:
    key: global.vertica.resourcepoolname
  dependsOn:
    andConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: vertica
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: vertica-postloadresourcepool-name
  label: opsb.vertica.resourcepoolname.postload.label
  description: opsb.vertica.resourcepoolname.postload.desc
  type:
    key: STRING
    isRequired: true
    defaultValue: itom_di_postload_respool_provider_default
  group: vertica-resourcepool-config
  helmValue:
    key: itomdipostload.dipostload.config.postload.postResourcePool
  dependsOn:
    andConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: vertica
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true
######### Integrations #########
- name: cloud-default-storageClass
  group: storage-class
  label: opsb.byok.storageClass.default.rwx.label
  description: opsb.byok.storageClass.default.rwx.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 100
    defaultValue: $apphub_default_storageclass_default-rwx
    isImmutable: true
  helmValue:
    key: global.persistence.storageClasses.default-rwx
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic

- name: cloud-default-rwo-storageClass
  group: storage-class
  label: opsb.byok.storageClass.default.rwo.label
  description: opsb.byok.storageClass.default.rwo.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 100
    defaultValue: $apphub_default_storageclass_default-rwo
    isImmutable: true
  helmValue:
    key: global.persistence.storageClasses.default-rwo
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
      - parameterName: obm.obm-param
        valueEquals: true

- name: openshift-default-storageClass
  group: storage-class
  label: opsb.byok.storageClass.default.rwx.label
  description: opsb.byok.storageClass.default.rwx.openshift.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 100
    defaultValue: ocs-storagecluster-cephfs
    isImmutable: true
  helmValue:
    key: global.persistence.storageClasses.default-rwx
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift

- name: openshift-default-rwo-storageClass
  group: storage-class
  label: opsb.byok.storageClass.default.rwo.label
  description: opsb.byok.storageClass.default.rwo.openshift.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 100
    defaultValue: ocs-storagecluster-cephfs
    isImmutable: true
  helmValue:
    key: global.persistence.storageClasses.default-rwo
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift
      - parameterName: obm.obm-param
        valueEquals: true

- name: default-storageClass
  group: storage-class
  label: opsb.byok.storageClass.default.rwx.label
  description: opsb.byok.storageClass.default.rwx.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 100
    defaultValue: $apphub_default_storageclass_default-rwx
    isImmutable: true
  helmValue:
    key: global.persistence.storageClasses.default-rwx
  dependsOn:
    orConditions:
      - parameterName: byok.k8s-provider
        valueEquals: cdf
      - parameterName: byok.k8s-provider
        valueEquals: generic

- name: default-rwo-storageClass
  group: storage-class
  label: opsb.byok.storageClass.default.rwo.label
  description: opsb.byok.storageClass.default.rwo.desc
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 100
    defaultValue: $apphub_default_storageclass_default-rwo
    isImmutable: true
  helmValue:
    key: global.persistence.storageClasses.default-rwo
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true
    orConditions:
      - parameterName: byok.k8s-provider
        valueEquals: cdf
      - parameterName: byok.k8s-provider
        valueEquals: generic
- name: obm-storageclassname-aws
  label: opsb.omi.storageClassName.aws.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
    defaultValue: "io2"
  group: storage-class-obm
  helmValue:
    key: obm.omi.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: obm.obm-param
        valueEquals: true

- name: obm-storageclassname-azure
  label: opsb.omi.storageClassName.azure.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
    defaultValue: "managed-premium"
  group: storage-class-obm
  helmValue:
    key: obm.omi.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: azure
      - parameterName: obm.obm-param
        valueEquals: true

- name: obm-storageclassname-openshift
  label: opsb.omi.storageClassName.openshift.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 128
    defaultValue: "ocs-storagecluster-ceph-rbd"
  group: storage-class-obm
  helmValue:
    key: obm.omi.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift
      - parameterName: obm.obm-param
        valueEquals: true


- name: obm-storageclassname
  label: opsb.omi.storageClassName.label
  type:
    key: STRING
    isRequired: false
    minLength: 1
    maxLength: 128
  group: storage-class-obm
  helmValue:
    key: obm.omi.storageClassName
  dependsOn:
    andConditions:
      - parameterName: obm.obm-param
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: generic
- name: monitor-prometheus
  label: common.monitoring.prometheus.label
  description: common.monitoring.prometheus.description
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: true
  group: monitoring-params
  helmValue:
    key: global.prometheus.deployPrometheusConfig

- name: monitor-grafana
  label: common.monitoring.grafana.label
  type:
    key: BOOLEAN
    isRequired: false
    defaultValue: true
  group: monitoring-params
  helmValue:
    key: global.prometheus.deployGrafanaConfig
  dependsOn:
    andConditions:
      - parameterName: monitor-prometheus
        valueEquals: true

- name: clusterrole-aws
  group: cluster-role
  label: common.byok.generic.toggle.label
  description: common.byok.generic.toggle.description
  type:
    key: BOOLEAN
    isRequired: true
    defaultValue: true
    falseMessage: common.db.ssl.false.message.awsclusterrole
    falseMessageType: warning
    falseMessageTitle: common.db.ssl.false.message.awsclusterrole.title
  helmValue:
    key: global.rbac.clusterRoleCreate
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws


- name: fluentbit-toggle
  label: fluentbit.toggle.label
  type:
    key: BOOLEAN
    isRequired: false
    userInput:
      - value: true
        dependsOn:
          andConditions:
            - parameterName: fluentbit-config.fluentbit-toggle-eval-display
              valueEquals: elasticsearch
    defaultValue: false
  group: fluentbit-config
  helmValue:
    key: userInput.toggle
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: cdf

- name: fluentbit-toggle-eval-display
  label: common.displaynull
  type:
    key: STRING
    display: false
    trueValue: "elasticsearch"
    falseValue: APPHUB_UNDEFINED
  group: fluentbit-config
  helmValue:
    key: itom-fluentbit.logging.output.receiver.type
  dependsOn:
    andConditions:
      - parameterName: fluentbit-config.fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf


- name: fluentbit-url
  label: fluentbit.url.label
  type:
    key: URL
    isRequired: true
    trustedCAListParam: "trust.trusted-ca-list"
  group: fluentbit-config
  helmValue:
    key: itom-fluentbit.logging.output.receiver.url
  dependsOn:
    andConditions:
      - parameterName: fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf

- name: fluentbit-user
  label: fluentbit.user.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
  group: fluentbit-config
  helmValue:
    key: itom-fluentbit.logging.output.receiver.user
  dependsOn:
    andConditions:
      - parameterName: fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf

- name: fluentbit-password
  label: fluentbit.password.label
  type:
    key: SECRET
    shouldValidate: false
    shouldConfirm: false
    isRequired: true
  group: fluentbit-config
  helmValue:
    key: secrets.fluentbit_receiver_password_key
  dependsOn:
    andConditions:
      - parameterName: fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf


- name: fluentbit-ack-toggle
  label: fluentbit.tls.toggle.label
  type:
    key: BOOLEAN
    userInput:
      - value: false
        dependsOn:
          andConditions:
            - parameterName: fluentbit-config.fluentbit-tls-eval-display
              valueEquals: Off
    isRequired: true
    defaultValue: true
  group: fluentbit-config
  helmValue:
    key: userInput.toggletls
  dependsOn:
    andConditions:
      - parameterName: fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf
        
- name: fluentbit-tls-eval-display
  label: common.displaynull
  type:
    key: STRING
    trueValue: "On"
    display: false 
    falseValue: "Off"
  group: fluentbit-config
  helmValue:
    key: itom-fluentbit.logging.output.receiver.tlsVerify
  dependsOn:
    andConditions:
      - parameterName: fluentbit-config.fluentbit-toggle
        valueEquals: true
      - parameterName: fluentbit-config.fluentbit-ack-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf


- name: ledgers-storageclass-name-aws
  label: opsb.lpv.ledgers.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: gp3
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.ledgers.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: ledgers-storageclass-name-azure
  label: opsb.lpv.ledgers.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: managed-premium
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.ledgers.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: azure
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: ledgers-storageclass-name-openshift
  label: opsb.lpv.ledgers.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: ocs-storagecluster-ceph-rbd
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.ledgers.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: ledgers-storageclass-name-generic
  label: opsb.lpv.ledgers.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.ledgers.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: generic
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: ledgers-size
  label: opsb.lpv.ledgers.size.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    regex: "^[0-9]*Gi$"
    defaultValue: 20Gi
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.ledgers.size
  dependsOn:
    andConditions:
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: journal-storageclass-name-aws
  label: opsb.lpv.journal.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: io2
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.journal.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: journal-storageclass-name-azure
  label: opsb.lpv.journal.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: managed-premium
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.journal.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: azure
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: journal-storageclass-name-openshift
  label: opsb.lpv.journal.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: ocs-storagecluster-ceph-rbd
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.journal.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: journal-storageclass-name-generic
  label: opsb.lpv.journal.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.journal.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: generic
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: journal-size
  label: opsb.lpv.journal.size.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    regex: "^[0-9]*Gi$"
    defaultValue: 4Gi
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.journal.size
  dependsOn:
    andConditions:
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeperdata-storageclass-name-aws
  label: opsb.lpv.zookeeperdata.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: gp3
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.data.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeperdata-storageclass-name-azure
  label: opsb.lpv.zookeeperdata.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: managed-premium
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.data.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: azure
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeperdata-storageclass-name-openshift
  label: opsb.lpv.zookeeperdata.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: ocs-storagecluster-ceph-rbd
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.data.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeperdata-storageclass-name-generic
  label: opsb.lpv.zookeeperdata.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.data.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: generic
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeper-data-size
  label: opsb.lpv.zookeeperdata.size.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    regex: "^[0-9]*Gi$"
    defaultValue: 4Gi
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.data.size
  dependsOn:
    andConditions:
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeperdatalog-storageclass-name-aws
  label: opsb.lpv.zookeeperdatalog.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: gp3
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.dataLog.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeperdatalog-storageclass-name-azure
  label: opsb.lpv.zookeeperdatalog.storageclass.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    defaultValue: managed-premium
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.dataLog.storageClassName
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueEquals: azure
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

- name: zookeeper-datalog-size
  label: opsb.lpv.zookeeperdatalog.size.label
  type:
    key: STRING
    isRequired: true
    minLength: 1
    maxLength: 256
    regex: "^[0-9]*Gi$"
    defaultValue: 10Gi
  group: coso-lpv-config
  helmValue:
    key: itomdipulsar.zookeeper.volumes.dataLog.size
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
      - parameterName: optic-reporting.deploy-optic-mode
        valueEquals: internal-coso
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true

####################################
# Evaluations (must come last)
####################################
evaluations:

- name: disable-dbvalidator
  type:
    key: EVALUATED_STRING
    defaultValue: "false"
  helmValue:
    key: global.validateDbConnection

#UCMDB is not dependent on OBM from 2022.11, hence commenting the below code
#- name: ucmdb-replicas
#  type:
#    key: EVALUATED_INTEGER
#    trueValue: 2
#    falseValue: 1
#  helmValue:
#    key: ucmdbserver.deployment.replicaCount
#    oldKey: obm.ucmdbserver.deployment.replicaCount
#  dependsOn:
#    andConditions:
#      - parameterName: obm.obm-high-availability
#        valueEquals: true
#      - parameterName: obm.obm-param
#        valueEquals: true

- name: embedded-vertica-eval
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: true
    falseValue: false
  helmValue:
    key: global.vertica.embedded
  dependsOn:
    orConditions:
      - parameterName: vertica.vertica-db-type
        valueEquals: embedded

- name: local-storage-ledgers
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: true
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.ledgers.local_storage
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: local-storage-journal
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: true
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.journal.local_storage
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: local-storage-zookeeper-data
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: true
  helmValue:
    key: itomdipulsar.zookeeper.volumes.data.local_storage
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: local-storage-zookeeper-datalog
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: true
  helmValue:
    key: itomdipulsar.zookeeper.volumes.dataLog.local_storage
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: pulsar-journal-sync-data
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: true
    falseValue: false
  helmValue:
    key: itomdipulsar.bookkeeper.volumes.configData.journalSyncData
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
    orConditions:
      - parameterName: optic.optic-enabled
        valueEquals: true
      - parameterName: analytics.analytics-param
        valueEquals: true
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: enable-external-nginx
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: true
  helmValue:
    key: itom-ingress-controller.nginx.service.external.enable
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic
      

- name: enable-internal-nginx
  type:
    key: EVALUATED_BOOLEAN
    trueValue: true
    falseValue: false
  helmValue:
    key: itom-ingress-controller.nginx.service.internal.enable
  dependsOn:
    andConditions:
      - parameterName: byok.k8s-provider
        valueNotEquals: cdf
      - parameterName: byok.k8s-provider
        valueNotEquals: openshift
      - parameterName: byok.k8s-provider
        valueNotEquals: generic


- name: service-type
  type:
    key: EVALUATED_STRING
    trueValue: "NodePort"
    falseValue: ""
  helmValue:
    key: itom-ingress-controller.nginx.service.external.type
  dependsOn:
    orConditions:
      - parameterName: byok.k8s-provider
        valueEquals: openshift
      - parameterName: byok.k8s-provider
        valueEquals: generic

- name: deployment-type
  type:
    key: EVALUATED_STRING
    trueValue: "standalone"
    falseValue: "embedded"
  helmValue:
    key: ucmdbprobe.deployment.type
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: uisysadmin-password-key
  type:
    key: EVALUATED_STRING
    trueValue: "UD_USER_PASSWORD"
    falseValue: "ucmdb_uisysadmin_password"
  helmValue:
    key: global.cms.secrets.UISysadmin
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: eval-port
  type:
    key: EVALUATED_INTEGER
    defaultValue: 8443

- name: eval-ucmdb-hostname
  type:
    key: EVALUATED_STRING
    defaultValue: "itom-ucmdb-writersvc"

- name: eval-cms-hostname
  type:
    key: EVALUATED_STRING
    defaultValue: "itom-ucmdb-svc"

- name: eval-cms-protocol
  type:
    key: EVALUATED_STRING
    defaultValue: "https"

- name: eval-cms-username
  type:
    key: EVALUATED_STRING
    defaultValue: "UISysadmin"

- name: ucmdb-hostname
  type:
    key: EVALUATED_PARAMETER
    trueValue: hyperscale-observability.ud-hostname
    falseValue: eval-ucmdb-hostname
  helmValue:
    key: ucmdbprobe.deployment.ucmdbServer.hostName
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cmsgateway-protocol
  type:
    key: EVALUATED_PARAMETER
    trueValue: hyperscale-observability.ud-protocol
    falseValue: eval-cms-protocol
  helmValue:
    key: cmsgateway.deployment.ucmdb.protocol
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cmsgateway-hostname
  type:
    key: EVALUATED_PARAMETER
    trueValue: hyperscale-observability.ud-hostname
    falseValue: eval-cms-hostname
  helmValue:
    key: cmsgateway.deployment.ucmdb.host
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cmsgateway-port
  type:
    key: EVALUATED_PARAMETER
    trueValue: hyperscale-observability.ucmdb-port
    falseValue: eval-port
  helmValue:
    key: cmsgateway.deployment.ucmdb.port
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: cmsgateway-username
  type:
    key: EVALUATED_PARAMETER
    trueValue: hyperscale-observability.ud-username
    falseValue: eval-cms-username
  helmValue:
    key: cmsgateway.deployment.ucmdb.userName
  dependsOn:
    andConditions:
      - parameterName: hyperscale-observability.external-obm-enabled
        valueEquals: true
    orConditions:
      - parameterName: hyperscale-observability.hyperscale-observability-param
        valueEquals: true
      - parameterName: hyperscale-observability.event-only-hyperscale-observability
        valueEquals: true

- name: optic-reporting-deployed
  type:
    key: EVALUATED_BOOLEAN
    trueValue: true
    falseValue: APPHUB_UNDEFINED
    defaultValue: APPHUB_UNDEFINED
  helmValue:
    key: global.services.opticReporting.deploy
    oldKey: tags.reporting
  dependsOn:
    orConditions:
    - parameterName: optic.optic-enabled
      valueEquals: true

- name: optic-datalake-deployed
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: APPHUB_UNDEFINED
    defaultValue: APPHUB_UNDEFINED
  helmValue:
    key: global.services.opticDataLake.deploy
  dependsOn:
    andConditions:
    - parameterName: optic-reporting.deploy-optic-mode
      valueEquals: external-coso


- name: nginx-external-loadbalancer
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: true
    falseValue: APPHUB_UNDEFINED
  helmValue:
    key: itom-ingress-controller.nginx.service.external.enable
  dependsOn:
    andConditions:
    - parameterName: external-access.alb-config
      valueEquals: true


- name: nginx-internal-loadbalancer
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: APPHUB_UNDEFINED
  helmValue:
    key: itom-ingress-controller.nginx.service.internal.enable
  dependsOn:
    andConditions:
    - parameterName: external-access.alb-config
      valueEquals: true
# Compute "global.database.internal" value based on persistence-db-type==embedded
- name: database-internal-flag
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: true
    falseValue: false
  helmValue:
    key: global.database.internal
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: embedded

# Compute "global.database.type" value based on persistence-db-type==oracle
- name: database-type
  label: none
  type:
    key: EVALUATED_STRING
    trueValue: oracle
    falseValue: postgresql
  helmValue:
    key: global.database.type
  dependsOn:
    andConditions:
    - parameterName: database.persistence-db-type
      valueEquals: oracle
- name: nginx-tls-key
  label: none
  type:
    key: EVALUATED_TLSKEY
    certificateGroup: server-certs
  helmValue:
    key: global.tls.key

- name: nginx-tls-cert
  label: none
  type:
    key: EVALUATED_TLSCERT
    certificateGroup: server-certs
  helmValue:
    key: global.tls.cert

- name: clusterrole-embedded
  group: cluster-role
  label: none
  type:
    key: EVALUATED_BOOLEAN
    trueValue: false
    falseValue: APPHUB_UNDEFINED
  helmValue:
    key: global.rbac.clusterRoleCreate
  dependsOn:
    orConditions:
      - parameterName: byok.k8s-provider
        valueEquals: generic
      - parameterName: byok.k8s-provider
        valueEquals: cdf
      - parameterName: byok.k8s-provider
        valueEquals: azure
      - parameterName: byok.k8s-provider
        valueEquals: openshift

- name: clusterrole-value
  group: cluster-role
  label: none
  type:
    key: EVALUATED_STRING
    trueValue: prometheus-cert-exporter-opsb
    falseValue: APPHUB_UNDEFINED
  helmValue:
    key: prometheus-cert-exporter.fullnameOverride
  dependsOn:
    orConditions:
      - parameterName: byok.k8s-provider
        valueEquals: aws

- name: fluentbit-toggle-eval
  label: none
  type:
    key: EVALUATED_STRING
    trueValue: "elasticsearch"
    falseValue: APPHUB_UNDEFINED
  helmValue:
    key: itom-fluentbit.logging.output.receiver.type
  dependsOn:
    andConditions:
      - parameterName: fluentbit-config.fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf

- name: fluentbit-password-eval
  type:
    key: EVALUATED_STRING
    trueValue: "fluentbit_receiver_password_key"
    falseValue: APPHUB_UNDEFINED
  helmValue:
    key: itom-fluentbit.logging.output.receiver.passwordKey
  dependsOn:
    andConditions:
      - parameterName: fluentbit-config.fluentbit-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf


- name: fluentbit-tls-eval
  type:
    key: EVALUATED_STRING
    trueValue: "On"
    falseValue: "Off"
  helmValue:
    key: itom-fluentbit.logging.output.receiver.tlsVerify
  dependsOn:
    andConditions:
      - parameterName: fluentbit-config.fluentbit-toggle
        valueEquals: true
      - parameterName: fluentbit-config.fluentbit-ack-toggle
        valueEquals: true
      - parameterName: byok.k8s-provider
        valueEquals: cdf
- name: opticdl-tls-key
  label: none
  type:
    key: EVALUATED_TLSKEY
    certificateGroup: server-certs-opticdl
  helmValue:
    key: messagebus.externalCa.tls.key

- name: opticdl-tls-cert
  label: none
  type:
    key: EVALUATED_TLSCERT
    certificateGroup: server-certs-opticdl
  helmValue:
    key: messagebus.externalCa.tls.cert

#####end#######
